package game;

import javax.swing.JOptionPane;

import cardDeck.Card;
import cardDeck.CardDeck;

public class Game {
	public static final int NUM_PLAYERS = 5;
	public static final int NUM_ROUNDS = 10;
	
	private CardDeck cardDeck;
	//private int numPlayers;
	//private int numRounds;
	private Player[] players;
	//private Round[] rounds;
	private Card trump;
	private int dealerNum;
	private int totalGuess;
	
	public Game(){
		
		enterPlayers();
		dealerNum = 0;
		totalGuess = 0;
		
		//rounds = new Round[NUM_ROUNDS];
		
		/*for(int i = 1; i <= NUM_ROUNDS; i++){
			startNewRound(i);
		}*/
		
		startNewRound(5);
		
		players[0].showCardsOnHand();

	}
	
	private void enterPlayers(){
		players = new Player[NUM_PLAYERS];
		String userName = JOptionPane.showInputDialog(null, "Enter your name", 
				"Player Information", JOptionPane.QUESTION_MESSAGE);
		Player user = new Player(userName, true);
		players[0] = user;
		for(int i = 1; i < NUM_PLAYERS; i++){
			String computerName = JOptionPane.showInputDialog(null, "Enter your opponent name (Player " + i + ")", 
					"Player Information", JOptionPane.QUESTION_MESSAGE);
			Player computer = new Player(computerName, false);
			players[i] = computer;
		}
	}
	
	private void startNewRound(int numTricks){
		
		//create a card deck and shuffle it
		cardDeck = new CardDeck();
		cardDeck.shuffle(30);
		
		//deal card(s) to each player
		for(int i = 0; i < players.length; i++){
			for(int j = 0; j < numTricks; j++){
				players[i].getCardsOnHand().add(cardDeck.deal());
			}
		}
		
		//determine the trump card
		trump = cardDeck.deal();
		
		//get players' guesses
		for(int i = 0; i < players.length; i++){
			
			//get user's guess
			if(players[i].isHuman()){
				
				int guess = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter your guess for round " /*+ round number */ 
						+ ")", "Player Guess", JOptionPane.QUESTION_MESSAGE));
				if(guess > numTricks){
					JOptionPane.showMessageDialog(null, "Guess is larger than number of tricks - Invalid");
					guess = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter your guess for round " /*+ round number */ 
							+ ")", "Player Guess", JOptionPane.QUESTION_MESSAGE));
				} else{
					players[i].setGuess(guess);
					totalGuess += guess;
				}
			}
			
		}
		
		
	}

}
